{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { get, getDatabase, limitToFirst, orderByKey, query, ref, startAt } from 'firebase/database';\nimport { useEffect, useState } from 'react';\n\nconst UseVideoList = page => {\n  _s();\n\n  const [Loading, setLoading] = useState(true);\n  const [Error, setError] = useState();\n  const [Videos, setVideos] = useState([]);\n  const [hasMore, setHasMore] = useState(true);\n  useEffect(() => {\n    async function fetchVideos() {\n      const DB = getDatabase();\n      const VideoRef = ref(DB, 'videos');\n      const VideoQuery = query(VideoRef, orderByKey(), startAt(\"\" + page), limitToFirst(8));\n\n      try {\n        setError(false);\n        setLoading(true);\n        const snapshot = await get(VideoQuery);\n        setLoading(false);\n\n        if (snapshot.exists()) {\n          setVideos(prev => {\n            return [...prev, Object.values(snapshot.val())];\n          });\n        } else {\n          setHasMore(false);\n        }\n      } catch (err) {\n        console.log(err);\n        setLoading(false);\n        setError(true);\n      }\n    }\n\n    setTimeout(() => {\n      fetchVideos();\n    }, 1000);\n  }, [page]);\n  return {\n    Loading,\n    Error,\n    Videos,\n    hasMore\n  };\n};\n\n_s(UseVideoList, \"Hh9b6v1q3MLcq7+x61723jQi+ko=\");\n\n_c = UseVideoList;\nexport default UseVideoList;\n\nvar _c;\n\n$RefreshReg$(_c, \"UseVideoList\");","map":{"version":3,"names":["get","getDatabase","limitToFirst","orderByKey","query","ref","startAt","useEffect","useState","UseVideoList","page","Loading","setLoading","Error","setError","Videos","setVideos","hasMore","setHasMore","fetchVideos","DB","VideoRef","VideoQuery","snapshot","exists","prev","Object","values","val","err","console","log","setTimeout"],"sources":["C:/Users/abdul/Desktop/final-app/src/components/hooks/useVideoList.js"],"sourcesContent":["import { get, getDatabase, limitToFirst, orderByKey, query, ref, startAt } from 'firebase/database';\r\nimport { useEffect, useState } from 'react';\r\n\r\n\r\n\r\nconst UseVideoList = (page) => {\r\n\r\n\r\n\r\n    const [Loading, setLoading] = useState(true)\r\n    const [Error, setError] = useState()\r\n    const [Videos, setVideos] = useState([])\r\n    const [hasMore, setHasMore] = useState(true)\r\n\r\n    useEffect(() => {\r\n        async function fetchVideos() {\r\n            const DB = getDatabase()\r\n            const VideoRef = ref(DB, 'videos')\r\n            const VideoQuery = query(VideoRef, orderByKey(), startAt(\"\" + page), limitToFirst(8))\r\n\r\n\r\n            try {\r\n                setError(false)\r\n                setLoading(true)\r\n\r\n                const snapshot = await get(VideoQuery);\r\n                setLoading(false)\r\n\r\n                if (snapshot.exists()) {\r\n                    setVideos((prev) => {\r\n                        return [...prev, Object.values(snapshot.val())]\r\n                    })\r\n                } else {\r\n                    setHasMore(false)\r\n                }\r\n\r\n            } catch (err) {\r\n                console.log(err);\r\n                setLoading(false)\r\n                setError(true)\r\n            }\r\n\r\n        }\r\n        setTimeout(() => {\r\n            fetchVideos()\r\n        }, 1000);\r\n\r\n    }, [page])\r\n\r\n\r\n    return {\r\n        Loading,\r\n        Error,\r\n        Videos,\r\n        hasMore\r\n    }\r\n\r\n}\r\n\r\nexport default UseVideoList;\r\n"],"mappings":";;AAAA,SAASA,GAAT,EAAcC,WAAd,EAA2BC,YAA3B,EAAyCC,UAAzC,EAAqDC,KAArD,EAA4DC,GAA5D,EAAiEC,OAAjE,QAAgF,mBAAhF;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,OAApC;;AAIA,MAAMC,YAAY,GAAIC,IAAD,IAAU;EAAA;;EAI3B,MAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBJ,QAAQ,CAAC,IAAD,CAAtC;EACA,MAAM,CAACK,KAAD,EAAQC,QAAR,IAAoBN,QAAQ,EAAlC;EACA,MAAM,CAACO,MAAD,EAASC,SAAT,IAAsBR,QAAQ,CAAC,EAAD,CAApC;EACA,MAAM,CAACS,OAAD,EAAUC,UAAV,IAAwBV,QAAQ,CAAC,IAAD,CAAtC;EAEAD,SAAS,CAAC,MAAM;IACZ,eAAeY,WAAf,GAA6B;MACzB,MAAMC,EAAE,GAAGnB,WAAW,EAAtB;MACA,MAAMoB,QAAQ,GAAGhB,GAAG,CAACe,EAAD,EAAK,QAAL,CAApB;MACA,MAAME,UAAU,GAAGlB,KAAK,CAACiB,QAAD,EAAWlB,UAAU,EAArB,EAAyBG,OAAO,CAAC,KAAKI,IAAN,CAAhC,EAA6CR,YAAY,CAAC,CAAD,CAAzD,CAAxB;;MAGA,IAAI;QACAY,QAAQ,CAAC,KAAD,CAAR;QACAF,UAAU,CAAC,IAAD,CAAV;QAEA,MAAMW,QAAQ,GAAG,MAAMvB,GAAG,CAACsB,UAAD,CAA1B;QACAV,UAAU,CAAC,KAAD,CAAV;;QAEA,IAAIW,QAAQ,CAACC,MAAT,EAAJ,EAAuB;UACnBR,SAAS,CAAES,IAAD,IAAU;YAChB,OAAO,CAAC,GAAGA,IAAJ,EAAUC,MAAM,CAACC,MAAP,CAAcJ,QAAQ,CAACK,GAAT,EAAd,CAAV,CAAP;UACH,CAFQ,CAAT;QAGH,CAJD,MAIO;UACHV,UAAU,CAAC,KAAD,CAAV;QACH;MAEJ,CAfD,CAeE,OAAOW,GAAP,EAAY;QACVC,OAAO,CAACC,GAAR,CAAYF,GAAZ;QACAjB,UAAU,CAAC,KAAD,CAAV;QACAE,QAAQ,CAAC,IAAD,CAAR;MACH;IAEJ;;IACDkB,UAAU,CAAC,MAAM;MACbb,WAAW;IACd,CAFS,EAEP,IAFO,CAAV;EAIH,CAjCQ,EAiCN,CAACT,IAAD,CAjCM,CAAT;EAoCA,OAAO;IACHC,OADG;IAEHE,KAFG;IAGHE,MAHG;IAIHE;EAJG,CAAP;AAOH,CApDD;;GAAMR,Y;;KAAAA,Y;AAsDN,eAAeA,YAAf"},"metadata":{},"sourceType":"module"}